<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Learning Hub - Interactive CSS Tutorials</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e9ecef;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --border: #dee2e6;
            --code-bg: #282c34;
            --code-text: #abb2bf;
            --success: #10b981;
            --warning: #f59e0b;
            --preview-bg: #ffffff;
        }

        [data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #3d3d3d;
            --text-primary: #e5e5e5;
            --text-secondary: #a0a0a0;
            --border: #404040;
            --preview-bg: #2d2d2d;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .compat-warning {
            background: linear-gradient(135deg, var(--warning) 0%, #ef4444 100%);
            color: white;
            padding: 12px 20px;
            text-align: center;
            font-size: 14px;
            display: none;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .compat-warning.show {
            display: block;
        }

        .compat-warning button {
            background: white;
            color: var(--warning);
            border: none;
            padding: 4px 12px;
            border-radius: 4px;
            margin-left: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
        }

        header {
            background: linear-gradient(135deg, var(--accent) 0%, #8b5cf6 100%);
            color: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        h1 {
            font-size: 28px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .theme-toggle, .reset-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .theme-toggle:hover, .reset-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 280px 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .sidebar {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            height: fit-content;
            position: sticky;
            top: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .sidebar h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .lesson-category {
            margin-bottom: 25px;
        }

        .category-title {
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin-bottom: 10px;
            letter-spacing: 0.5px;
        }

        .lesson-list {
            list-style: none;
        }

        .lesson-item {
            padding: 10px 12px;
            margin-bottom: 5px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            border-left: 3px solid transparent;
        }

        .lesson-item:hover {
            background: var(--bg-tertiary);
            border-left-color: var(--accent);
        }

        .lesson-item.active {
            background: var(--accent);
            color: white;
            font-weight: 600;
            border-left-color: var(--accent-hover);
        }

        .content-area {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .lesson-header {
            border-bottom: 2px solid var(--border);
            padding-bottom: 15px;
            margin-bottom: 25px;
        }

        .lesson-title {
            font-size: 32px;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .lesson-level {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .level-beginner {
            background: #dcfce7;
            color: #166534;
        }

        .level-intermediate {
            background: #fef3c7;
            color: #92400e;
        }

        .level-advanced {
            background: #fecaca;
            color: #991b1b;
        }

        [data-theme="dark"] .level-beginner {
            background: #166534;
            color: #dcfce7;
        }

        [data-theme="dark"] .level-intermediate {
            background: #92400e;
            color: #fef3c7;
        }

        [data-theme="dark"] .level-advanced {
            background: #991b1b;
            color: #fecaca;
        }

        .lesson-description {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: 30px;
            color: var(--text-secondary);
        }

        .playground {
            margin-top: 30px;
        }

        .playground-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .playground-title {
            font-size: 20px;
            font-weight: 600;
        }

        .playground-controls {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        .playground-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .code-editor {
            background: var(--code-bg);
            border-radius: 8px;
            overflow: hidden;
        }

        .editor-header {
            background: #21252b;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .editor-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .dot-red { background: #ff5f56; }
        .dot-yellow { background: #ffbd2e; }
        .dot-green { background: #27c93f; }

        .editor-title {
            color: #abb2bf;
            font-size: 12px;
            margin-left: auto;
            font-weight: 600;
        }

        textarea {
            width: 100%;
            height: 400px;
            background: var(--code-bg);
            color: var(--code-text);
            border: none;
            padding: 15px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            outline: none;
        }

        .preview-container {
            background: var(--preview-bg);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            min-height: 400px;
        }

        .preview-header {
            background: var(--bg-tertiary);
            padding: 10px 15px;
            border-radius: 8px 8px 0 0;
            margin: -20px -20px 20px -20px;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .key-points {
            margin-top: 20px;
        }

        .key-points h3 {
            font-size: 16px;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .key-points ul {
            padding-left: 25px;
        }

        .key-points li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        @media (max-width: 1024px) {
            .main-layout {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: static;
            }

            .playground-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 22px;
            }

            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .lesson-title {
                font-size: 24px;
            }

            .content-area {
                padding: 20px;
            }
        }

        .footer {
            text-align: center;
            padding: 30px 20px;
            margin-top: 50px;
            color: var(--text-secondary);
            font-size: 14px;
            border-top: 1px solid var(--border);
        }

        .challenge-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .challenge-box h3 {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .challenge-box p {
            font-size: 14px;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div class="compat-warning" id="compatWarning">
        ‚ö†Ô∏è You're using an in-app browser. For the best experience, open this site in Chrome, Safari, or Firefox.
        <button onclick="dismissWarning()">Got it</button>
    </div>

    <header>
        <div class="header-content">
            <h1>
                <span>üìò</span>
                CSS Learning Hub
            </h1>
            <div class="header-controls">
                <button class="theme-toggle" onclick="toggleTheme()">üåì Toggle Theme</button>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="main-layout">
            <aside class="sidebar">
                <h2>üìö Lessons</h2>
                <div id="lessonNavigation"></div>
            </aside>

            <main class="content-area">
                <div id="lessonContent"></div>
            </main>
        </div>
    </div>

    <footer class="footer">
        <p>Built with ‚ù§Ô∏è for CSS learners | Open source project | Compatible with all modern browsers</p>
    </footer>

    <script>
        // ES5 compatible JavaScript
        var lessonsData = {
            beginner: [
                {
                    id: 'css-selectors',
                    title: 'CSS Selectors',
                    level: 'beginner',
                    description: 'Learn how to target HTML elements using CSS selectors. Selectors are patterns used to select the elements you want to style.',
                    defaultHTML: '<div class="box">Hello CSS!</div>\n<p id="special">I am special</p>\n<span>Regular span</span>',
                    defaultCSS: '.box {\n  background: #3b82f6;\n  color: white;\n  padding: 20px;\n  border-radius: 8px;\n}\n\n#special {\n  color: #10b981;\n  font-weight: bold;\n}\n\nspan {\n  text-decoration: underline;\n}',
                    keyPoints: [
                        'Element selector: targets all elements of a type (e.g., div, p)',
                        'Class selector: targets elements with a specific class (.className)',
                        'ID selector: targets a unique element with an ID (#idName)',
                        'You can combine selectors for more specific targeting'
                    ],
                    challenge: 'Try changing the colors and adding styles to different selectors!'
                },
                {
                    id: 'colors-backgrounds',
                    title: 'Colors & Backgrounds',
                    level: 'beginner',
                    description: 'Explore different ways to add colors and backgrounds to your elements. CSS offers multiple color formats and background properties.',
                    defaultHTML: '<div class="gradient-box">Gradient Background</div>\n<div class="image-box">Background Properties</div>\n<div class="color-box">Color Values</div>',
                    defaultCSS: '.gradient-box {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 30px;\n  margin: 10px 0;\n  border-radius: 12px;\n}\n\n.image-box {\n  background-color: #e0e7ff;\n  padding: 30px;\n  margin: 10px 0;\n  border-radius: 12px;\n}\n\n.color-box {\n  background: rgba(59, 130, 246, 0.2);\n  color: #1e40af;\n  padding: 30px;\n  margin: 10px 0;\n  border-radius: 12px;\n  border: 2px solid #3b82f6;\n}',
                    keyPoints: [
                        'Use hex colors: #3b82f6',
                        'Use RGB: rgb(59, 130, 246)',
                        'Use RGBA for transparency: rgba(59, 130, 246, 0.5)',
                        'Create gradients with linear-gradient() or radial-gradient()',
                        'background-color sets solid colors, background allows images and gradients'
                    ],
                    challenge: 'Create a card with a gradient background and semi-transparent overlay!'
                },
                {
                    id: 'box-model',
                    title: 'Box Model',
                    level: 'beginner',
                    description: 'Understanding the CSS box model is fundamental. Every element is a box with content, padding, border, and margin.',
                    defaultHTML: '<div class="box-demo">Box Model Demo</div>\n<div class="box-demo outlined">With Border</div>',
                    defaultCSS: '.box-demo {\n  background: #dbeafe;\n  color: #1e40af;\n  padding: 20px;\n  margin: 20px 0;\n  border: 4px solid #3b82f6;\n  border-radius: 8px;\n  text-align: center;\n  font-weight: bold;\n}\n\n.outlined {\n  border-style: dashed;\n  background: #fef3c7;\n  color: #92400e;\n  border-color: #f59e0b;\n}',
                    keyPoints: [
                        'Content: the actual content of the box',
                        'Padding: space between content and border',
                        'Border: a line around the padding',
                        'Margin: space outside the border',
                        'box-sizing: border-box includes padding and border in width'
                    ],
                    challenge: 'Try adjusting padding, margin, and border values to see how they affect spacing!'
                },
                {
                    id: 'fonts-text',
                    title: 'Fonts & Text',
                    level: 'beginner',
                    description: 'Style your text with different fonts, sizes, weights, and decorations. Typography is crucial for readable and beautiful designs.',
                    defaultHTML: '<h1 class="title">Main Heading</h1>\n<p class="paragraph">This is a paragraph with custom styling. Notice the font family, size, and spacing.</p>\n<p class="highlight">Highlighted text with different properties</p>',
                    defaultCSS: '.title {\n  font-family: Georgia, serif;\n  font-size: 36px;\n  font-weight: bold;\n  color: #1e40af;\n  text-align: center;\n  letter-spacing: -1px;\n}\n\n.paragraph {\n  font-family: Arial, sans-serif;\n  font-size: 16px;\n  line-height: 1.8;\n  color: #4b5563;\n}\n\n.highlight {\n  font-weight: 600;\n  font-style: italic;\n  text-decoration: underline;\n  color: #7c3aed;\n}',
                    keyPoints: [
                        'font-family: sets the typeface',
                        'font-size: controls text size (px, em, rem)',
                        'font-weight: controls thickness (normal, bold, 100-900)',
                        'line-height: controls spacing between lines',
                        'text-align: aligns text (left, center, right, justify)',
                        'letter-spacing and word-spacing adjust spacing'
                    ],
                    challenge: 'Create a stylish heading with custom font properties!'
                },
                {
                    id: 'display-position',
                    title: 'Display & Position',
                    level: 'beginner',
                    description: 'Control how elements are displayed and positioned on the page. These properties are essential for creating layouts.',
                    defaultHTML: '<div class="container-demo">\n  <div class="inline-box">Inline Block 1</div>\n  <div class="inline-box">Inline Block 2</div>\n  <div class="block-box">Block Element</div>\n  <div class="relative-box">\n    Relative\n    <span class="absolute-box">Absolute</span>\n  </div>\n</div>',
                    defaultCSS: '.container-demo {\n  border: 2px dashed #cbd5e1;\n  padding: 20px;\n}\n\n.inline-box {\n  display: inline-block;\n  background: #bfdbfe;\n  padding: 15px;\n  margin: 5px;\n  border-radius: 6px;\n}\n\n.block-box {\n  display: block;\n  background: #fcd34d;\n  padding: 15px;\n  margin: 10px 0;\n  border-radius: 6px;\n}\n\n.relative-box {\n  position: relative;\n  background: #d1fae5;\n  padding: 40px 15px;\n  margin: 10px 0;\n  border-radius: 6px;\n}\n\n.absolute-box {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  background: #fca5a5;\n  padding: 5px 10px;\n  border-radius: 4px;\n  font-size: 12px;\n}',
                    keyPoints: [
                        'display: block - takes full width, starts on new line',
                        'display: inline - flows with text, no width/height',
                        'display: inline-block - flows with text but accepts width/height',
                        'position: static - default flow',
                        'position: relative - positioned relative to normal position',
                        'position: absolute - positioned relative to nearest positioned ancestor',
                        'position: fixed - positioned relative to viewport'
                    ],
                    challenge: 'Try creating a card with a badge in the corner using absolute positioning!'
                }
            ],
            intermediate: [
                {
                    id: 'flexbox',
                    title: 'Flexbox',
                    level: 'intermediate',
                    description: 'Flexbox is a powerful layout model for creating flexible and responsive layouts. It makes alignment and distribution of space easy.',
                    defaultHTML: '<div class="flex-container">\n  <div class="flex-item">Item 1</div>\n  <div class="flex-item">Item 2</div>\n  <div class="flex-item">Item 3</div>\n</div>',
                    defaultCSS: '.flex-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: #f3f4f6;\n  padding: 20px;\n  border-radius: 8px;\n  gap: 15px;\n  min-height: 200px;\n}\n\n.flex-item {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 30px;\n  border-radius: 8px;\n  flex: 1;\n  text-align: center;\n  font-weight: bold;\n  transition: transform 0.3s;\n}\n\n.flex-item:hover {\n  transform: scale(1.05);\n}',
                    keyPoints: [
                        'display: flex - creates a flex container',
                        'justify-content - aligns items horizontally (flex-start, center, space-between)',
                        'align-items - aligns items vertically (flex-start, center, stretch)',
                        'flex-direction - changes the main axis (row, column)',
                        'gap - adds space between flex items',
                        'flex: 1 - makes items grow to fill available space'
                    ],
                    challenge: 'Try changing justify-content and align-items to see different layouts!'
                },
                {
                    id: 'css-grid',
                    title: 'CSS Grid',
                    level: 'intermediate',
                    description: 'CSS Grid is a two-dimensional layout system perfect for creating complex layouts with rows and columns.',
                    defaultHTML: '<div class="grid-container">\n  <div class="grid-item header">Header</div>\n  <div class="grid-item sidebar">Sidebar</div>\n  <div class="grid-item main">Main Content</div>\n  <div class="grid-item footer">Footer</div>\n</div>',
                    defaultCSS: '.grid-container {\n  display: grid;\n  grid-template-columns: 200px 1fr;\n  grid-template-rows: auto 1fr auto;\n  gap: 15px;\n  min-height: 400px;\n}\n\n.grid-item {\n  background: #dbeafe;\n  padding: 20px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  color: #1e40af;\n}\n\n.header {\n  grid-column: 1 / -1;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n}\n\n.footer {\n  grid-column: 1 / -1;\n  background: #f3f4f6;\n}',
                    keyPoints: [
                        'display: grid - creates a grid container',
                        'grid-template-columns - defines column tracks',
                        'grid-template-rows - defines row tracks',
                        'gap - spacing between grid items',
                        'grid-column / grid-row - makes items span multiple tracks',
                        'fr unit - represents a fraction of available space'
                    ],
                    challenge: 'Create a photo gallery layout with different sized items!'
                },
                {
                    id: 'responsive-design',
                    title: 'Responsive Design',
                    level: 'intermediate',
                    description: 'Make your designs work on all screen sizes using media queries and responsive units.',
                    defaultHTML: '<div class="responsive-container">\n  <div class="responsive-box">Resize your browser!</div>\n  <div class="responsive-box">I adapt to screen size</div>\n  <div class="responsive-box">Mobile-friendly</div>\n</div>',
                    defaultCSS: '.responsive-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 20px;\n  padding: 20px;\n}\n\n.responsive-box {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n  color: white;\n  padding: 40px 20px;\n  border-radius: 12px;\n  text-align: center;\n  font-weight: bold;\n  min-height: 150px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n@media (max-width: 768px) {\n  .responsive-box {\n    padding: 30px 15px;\n    font-size: 14px;\n  }\n}',
                    keyPoints: [
                        'Use relative units: %, em, rem, vw, vh',
                        'Media queries: @media (max-width: 768px) { }',
                        'Mobile-first approach: start with mobile styles, then add desktop',
                        'auto-fit and minmax() for responsive grids',
                        'Common breakpoints: 640px (mobile), 768px (tablet), 1024px (desktop)'
                    ],
                    challenge: 'Try resizing your browser window to see the responsive layout in action!'
                },
                {
                    id: 'pseudo-classes',
                    title: 'Pseudo-classes & Pseudo-elements',
                    level: 'intermediate',
                    description: 'Add special effects to elements based on their state or position using pseudo-classes and pseudo-elements.',
                    defaultHTML: '<button class="fancy-button">Hover Me!</button>\n<ul class="styled-list">\n  <li>First item</li>\n  <li>Second item</li>\n  <li>Third item</li>\n  <li>Fourth item</li>\n</ul>',
                    defaultCSS: '.fancy-button {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  padding: 15px 30px;\n  font-size: 16px;\n  font-weight: bold;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s;\n  margin: 20px 0;\n}\n\n.fancy-button:hover {\n  transform: translateY(-3px);\n  box-shadow: 0 10px 20px rgba(0,0,0,0.2);\n}\n\n.fancy-button:active {\n  transform: translateY(0);\n}\n\n.styled-list li {\n  padding: 12px;\n  margin: 8px 0;\n  border-radius: 6px;\n  background: #f3f4f6;\n}\n\n.styled-list li:first-child {\n  background: #dbeafe;\n  font-weight: bold;\n}\n\n.styled-list li:nth-child(even) {\n  background: #fef3c7;\n}\n\n.styled-list li::before {\n  content: "‚úì ";\n  color: #10b981;\n  font-weight: bold;\n}',
                    keyPoints: [
                        ':hover - when user hovers over element',
                        ':active - when element is being clicked',
                        ':focus - when element has keyboard focus',
                        ':first-child, :last-child - first or last child element',
                        ':nth-child(n) - select specific child elements',
                        '::before, ::after - insert content before or after element'
                    ],
                    challenge: 'Create a button with a custom hover effect and a list with alternating colors!'
                },
                {
                    id: 'transform-transition',
                    title: 'Transform & Transition',
                    level: 'intermediate',
                    description: 'Add smooth animations and transformations to your elements for better user experience.',
                    defaultHTML: '<div class="transform-demo">\n  <div class="card">Hover to rotate!</div>\n  <div class="card scale">Hover to scale!</div>\n  <div class="card slide">Hover to slide!</div>\n</div>',
                    defaultCSS: '.transform-demo {\n  display: flex;\n  gap: 20px;\n  flex-wrap: wrap;\n  padding: 20px;\n}\n\n.card {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 40px 30px;\n  border-radius: 12px;\n  font-weight: bold;\n  text-align: center;\n  cursor: pointer;\n  transition: all 0.4s ease;\n  flex: 1;\n  min-width: 150px;\n}\n\n.card:hover {\n  transform: rotate(5deg);\n  box-shadow: 0 15px 30px rgba(0,0,0,0.3);\n}\n\n.scale:hover {\n  transform: scale(1.1) rotate(0deg);\n}\n\n.slide:hover {\n  transform: translateX(10px) rotate(0deg);\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n}',
                    keyPoints: [
                        'transform: rotate(45deg) - rotates element',
                        'transform: scale(1.5) - makes element larger/smaller',
                        'transform: translate(x, y) - moves element',
                        'transition: all 0.3s - animates property changes',
                        'transition-timing-function: ease, linear, ease-in-out',
                        'You can combine multiple transforms'
                    ],
                    challenge: 'Create a card that rotates and changes color on hover!'
                }
            ],
            advanced: [
                {
                    id: 'css-animations',
                    title: 'CSS Animations',
                    level: 'advanced',
                    description: 'Create complex animations using keyframes. Animations allow you to define multiple steps and create sophisticated effects.',
                    defaultHTML: '<div class="animation-demo">\n  <div class="bounce">Bouncing</div>\n  <div class="pulse">Pulsing</div>\n  <div class="spin">Spinning</div>\n</div>',
                    defaultCSS: '@keyframes bounce {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-20px); }\n}\n\n@keyframes pulse {\n  0%, 100% { transform: scale(1); }\n  50% { transform: scale(1.1); }\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n.animation-demo {\n  display: flex;\n  gap: 20px;\n  padding: 20px;\n  flex-wrap: wrap;\n}\n\n.animation-demo > div {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 30px;\n  border-radius: 12px;\n  font-weight: bold;\n  flex: 1;\n  min-width: 150px;\n  text-align: center;\n}\n\n.bounce {\n  animation: bounce 2s ease-in-out infinite;\n}\n\n.pulse {\n  animation: pulse 1.5s ease-in-out infinite;\n}\n\n.spin {\n  animation: spin 3s linear infinite;\n}',
                    keyPoints: [
                        '@keyframes defines the animation sequence',
                        'animation: name duration timing-function iteration-count',
                        'Use percentages (0%, 50%, 100%) or from/to for keyframes',
                        'animation-delay: wait before starting',
                        'animation-direction: normal, reverse, alternate',
                        'infinite makes animation loop forever'
                    ],
                    challenge: 'Create a loading spinner with a custom animation!'
                },
                {
                    id: 'css-variables',
                    title: 'CSS Variables',
                    level: 'advanced',
                    description: 'CSS Custom Properties (variables) allow you to store and reuse values throughout your stylesheet, making themes and design systems easy.',
                    defaultHTML: '<div class="theme-demo">\n  <div class="var-card">Primary Card</div>\n  <div class="var-card secondary">Secondary Card</div>\n  <div class="var-card accent">Accent Card</div>\n</div>',
                    defaultCSS: ':root {\n  --primary-color: #667eea;\n  --secondary-color: #764ba2;\n  --accent-color: #f093fb;\n  --spacing: 20px;\n  --border-radius: 12px;\n}\n\n.theme-demo {\n  display: flex;\n  gap: var(--spacing);\n  padding: var(--spacing);\n  flex-wrap: wrap;\n}\n\n.var-card {\n  background: var(--primary-color);\n  color: white;\n  padding: calc(var(--spacing) * 2);\n  border-radius: var(--border-radius);\n  font-weight: bold;\n  flex: 1;\n  min-width: 150px;\n  text-align: center;\n  transition: transform 0.3s;\n}\n\n.var-card:hover {\n  transform: translateY(-5px);\n}\n\n.secondary {\n  background: var(--secondary-color);\n}\n\n.accent {\n  background: var(--accent-color);\n}',
                    keyPoints: [
                        'Define variables in :root with --variable-name',
                        'Use variables with var(--variable-name)',
                        'Variables cascade and can be overridden',
                        'Use calc() for mathematical operations',
                        'Perfect for creating theme systems',
                        'Can be changed with JavaScript for dynamic themes'
                    ],
                    challenge: 'Try changing the CSS variable values to create a different color theme!'
                },
                {
                    id: 'dark-mode',
                    title: 'Dark Mode',
                    level: 'advanced',
                    description: 'Implement a complete dark mode using CSS variables and media queries. Modern websites should support user preferences.',
                    defaultHTML: '<div class="mode-demo">\n  <div class="mode-card">\n    <h3>Dark Mode Support</h3>\n    <p>This card adapts to your system theme preferences or manual toggle.</p>\n  </div>\n</div>',
                    defaultCSS: ':root {\n  --bg: #ffffff;\n  --text: #1f2937;\n  --card-bg: #f3f4f6;\n  --border: #e5e7eb;\n}\n\n[data-theme="dark"] {\n  --bg: #1f2937;\n  --text: #f3f4f6;\n  --card-bg: #374151;\n  --border: #4b5563;\n}\n\n.mode-demo {\n  background: var(--bg);\n  padding: 30px;\n  border-radius: 12px;\n  transition: background 0.3s, color 0.3s;\n}\n\n.mode-card {\n  background: var(--card-bg);\n  color: var(--text);\n  padding: 30px;\n  border-radius: 12px;\n  border: 2px solid var(--border);\n  transition: all 0.3s;\n}\n\n.mode-card h3 {\n  margin-bottom: 15px;\n  color: var(--text);\n}\n\n.mode-card p {\n  color: var(--text);\n  opacity: 0.8;\n  line-height: 1.6;\n}',
                    keyPoints: [
                        'Use CSS variables for theme colors',
                        '@media (prefers-color-scheme: dark) detects system preference',
                        'Add data-theme attribute for manual toggle',
                        'Transition properties for smooth theme changes',
                        'Consider contrast ratios for accessibility',
                        'Test both themes thoroughly'
                    ],
                    challenge: 'Use the theme toggle in the header to see the dark mode in action!'
                },
                {
                    id: 'layout-patterns',
                    title: 'Layout Patterns',
                    level: 'advanced',
                    description: 'Master common layout patterns used in modern web design. These patterns solve real-world layout challenges.',
                    defaultHTML: '<div class="pattern-container">\n  <div class="pattern-item">1</div>\n  <div class="pattern-item">2</div>\n  <div class="pattern-item">3</div>\n  <div class="pattern-item">4</div>\n  <div class="pattern-item">5</div>\n  <div class="pattern-item">6</div>\n</div>',
                    defaultCSS: '.pattern-container {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 20px;\n  padding: 20px;\n}\n\n.pattern-item {\n  aspect-ratio: 1;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 32px;\n  font-weight: bold;\n  color: white;\n  transition: all 0.3s;\n}\n\n.pattern-item:hover {\n  transform: scale(1.05);\n  box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);\n}\n\n.pattern-item:nth-child(3n) {\n  background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);\n}\n\n.pattern-item:nth-child(3n+1) {\n  background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);\n}',
                    keyPoints: [
                        'Holy Grail Layout: header, footer, sidebar, main content',
                        'Card Grid: responsive grid with auto-fit',
                        'Centered Container: max-width with auto margins',
                        'Sticky Footer: flexbox or grid with min-height',
                        'aspect-ratio: maintains width/height ratio',
                        'auto-fit/auto-fill: responsive without media queries'
                    ],
                    challenge: 'Create a Pinterest-style masonry layout or a Netflix-style card grid!'
                },
                {
                    id: 'css-best-practices',
                    title: 'CSS Best Practices',
                    level: 'advanced',
                    description: 'Write maintainable, scalable CSS using modern methodologies and naming conventions.',
                    defaultHTML: '<div class="best-practices">\n  <div class="card card--highlighted">\n    <div class="card__header">BEM Methodology</div>\n    <div class="card__body">\n      <p class="card__text">Block Element Modifier</p>\n    </div>\n  </div>\n</div>',
                    defaultCSS: '/* BEM Naming Convention */\n/* Block */\n.card {\n  background: white;\n  border-radius: 12px;\n  box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n  overflow: hidden;\n  transition: transform 0.3s;\n}\n\n/* Element */\n.card__header {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 20px;\n  font-weight: bold;\n  font-size: 18px;\n}\n\n.card__body {\n  padding: 20px;\n}\n\n.card__text {\n  color: #4b5563;\n  line-height: 1.6;\n}\n\n/* Modifier */\n.card--highlighted {\n  border: 3px solid #667eea;\n  transform: scale(1.02);\n}\n\n.card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 20px rgba(0,0,0,0.15);\n}',
                    keyPoints: [
                        'BEM: Block__Element--Modifier naming',
                        'Keep specificity low, avoid !important',
                        'Use CSS variables for reusable values',
                        'Mobile-first approach with min-width media queries',
                        'Group related styles together',
                        'Comment complex or non-obvious code',
                        'Use meaningful class names',
                        'Avoid inline styles in production'
                    ],
                    challenge: 'Refactor existing code using BEM methodology!'
                }
            ]
        };

        var currentLesson = null;
        var currentTheme = 'light';
        var cssTextarea = null;
        var previewFrame = null;

        function detectInAppBrowser() {
            var ua = navigator.userAgent || navigator.vendor || window.opera;
            var isInApp = false;

            if (/FBAN|FBAV|Instagram|Line|Zalo|Twitter|Viber/i.test(ua)) {
                isInApp = true;
            }

            if (/WebView|wv/.test(ua) || window.navigator.standalone === false) {
                isInApp = true;
            }

            if (isInApp) {
                var warning = document.getElementById('compatWarning');
                if (warning) {
                    warning.classList.add('show');
                }
            }
        }

        function dismissWarning() {
            var warning = document.getElementById('compatWarning');
            if (warning) {
                warning.classList.remove('show');
            }
        }

        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
        }

        function renderNavigation() {
            var nav = document.getElementById('lessonNavigation');
            var html = '';

            var categories = [
                { key: 'beginner', title: 'Beginner' },
                { key: 'intermediate', title: 'Intermediate' },
                { key: 'advanced', title: 'Advanced' }
            ];

            for (var i = 0; i < categories.length; i++) {
                var cat = categories[i];
                html += '<div class="lesson-category">';
                html += '<div class="category-title">' + cat.title + '</div>';
                html += '<ul class="lesson-list">';

                var lessons = lessonsData[cat.key];
                for (var j = 0; j < lessons.length; j++) {
                    var lesson = lessons[j];
                    var activeClass = currentLesson && currentLesson.id === lesson.id ? ' active' : '';
                    html += '<li class="lesson-item' + activeClass + '" onclick="loadLesson(\'' + cat.key + '\', ' + j + ')">';
                    html += lesson.title;
                    html += '</li>';
                }

                html += '</ul>';
                html += '</div>';
            }

            nav.innerHTML = html;
        }

        function loadLesson(category, index) {
            currentLesson = lessonsData[category][index];
            renderNavigation();
            renderLesson();
        }

        function renderLesson() {
            if (!currentLesson) return;

            var content = document.getElementById('lessonContent');
            var html = '';

            html += '<div class="lesson-header">';
            html += '<h2 class="lesson-title">' + currentLesson.title + '</h2>';
            html += '<span class="lesson-level level-' + currentLesson.level + '">' + currentLesson.level + '</span>';
            html += '</div>';

            html += '<p class="lesson-description">' + currentLesson.description + '</p>';

            if (currentLesson.keyPoints && currentLesson.keyPoints.length > 0) {
                html += '<div class="key-points">';
                html += '<h3>üìù Key Points</h3>';
                html += '<ul>';
                for (var i = 0; i < currentLesson.keyPoints.length; i++) {
                    html += '<li>' + currentLesson.keyPoints[i] + '</li>';
                }
                html += '</ul>';
                html += '</div>';
            }

            if (currentLesson.challenge) {
                html += '<div class="challenge-box">';
                html += '<h3>üéØ Challenge</h3>';
                html += '<p>' + currentLesson.challenge + '</p>';
                html += '</div>';
            }

            html += '<div class="playground">';
            html += '<div class="playground-header">';
            html += '<h3 class="playground-title">üé® Interactive Playground</h3>';
            html += '<div class="playground-controls">';
            html += '<button class="btn btn-secondary" onclick="resetPlayground()">‚Üª Reset</button>';
            html += '<button class="btn btn-primary" onclick="copyCSS()">üìã Copy CSS</button>';
            html += '</div>';
            html += '</div>';

            html += '<div class="playground-grid">';
            html += '<div class="code-editor">';
            html += '<div class="editor-header">';
            html += '<div class="editor-dot dot-red"></div>';
            html += '<div class="editor-dot dot-yellow"></div>';
            html += '<div class="editor-dot dot-green"></div>';
            html += '<span class="editor-title">styles.css</span>';
            html += '</div>';
            html += '<textarea id="cssInput" spellcheck="false">' + currentLesson.defaultCSS + '</textarea>';
            html += '</div>';

            html += '<div class="preview-container">';
            html += '<div class="preview-header">üëÅÔ∏è Live Preview</div>';
            html += '<div id="preview"></div>';
            html += '</div>';

            html += '</div>';
            html += '</div>';

            content.innerHTML = html;

            cssTextarea = document.getElementById('cssInput');
            previewFrame = document.getElementById('preview');

            if (cssTextarea) {
                cssTextarea.addEventListener('input', updatePreview);
                updatePreview();
            }
        }

        function updatePreview() {
            if (!currentLesson || !cssTextarea || !previewFrame) return;

            var css = cssTextarea.value;
            var html = currentLesson.defaultHTML;

            var fullHTML = '<style>' + css + '</style>' + html;
            previewFrame.innerHTML = fullHTML;
        }

        function resetPlayground() {
            if (!currentLesson || !cssTextarea) return;
            
            cssTextarea.value = currentLesson.defaultCSS;
            updatePreview();
        }

        function copyCSS() {
            if (!cssTextarea) return;

            cssTextarea.select();
            cssTextarea.setSelectionRange(0, 99999);

            try {
                document.execCommand('copy');
                alert('CSS copied to clipboard!');
            } catch (err) {
                alert('Failed to copy. Please select and copy manually.');
            }
        }

        // Initialize app
        function init() {
            detectInAppBrowser();
            loadLesson('beginner', 0);
        }

        // Start app when page loads
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>