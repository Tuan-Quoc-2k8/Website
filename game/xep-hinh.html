<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Block Puzzle Game</title>
  <link rel="stylesheet" href="./data/xep-hinh/styles.css">
</head>
<body>
  
  <!-- INTRO SCREEN -->
  <div id="introScreen" class="screen active">
    <div class="intro-container">
      <h1 class="game-title" data-translate="gameTitle">๐งฉ Xแบฟp hรฌnh gแบกch</h1>
      <p class="game-subtitle" data-translate="gameSubtitle">Thแปญ thรกch trรญ tuแป cแปงa bแบกn!</p>
      
      <div class="intro-buttons">
        <button class="intro-btn play-btn" id="playBtn">
          <span data-translate="play">โถ๏ธ Chฦกi ngay</span>
        </button>
        <button class="intro-btn settings-btn" id="settingsBtn">
          <span data-translate="settings">โ๏ธ Cรi ฤแบทt</span>
        </button>
      </div>
      
      <div class="intro-footer">
        <p data-translate="instructions">Kรฉo vร thแบฃ cรกc khแปi ฤแป ฤiแปn vรo bแบฃng</p>
      </div>
    </div>
  </div>

  <!-- SETTINGS MODAL -->
  <div id="settingsModal" class="modal-backdrop">
    <div class="settings-panel">
      <div class="settings-header">
        <h2 data-translate="settings">โ๏ธ Cรi ฤแบทt</h2>
        <button class="close-btn" id="closeSettings">โ</button>
      </div>
      
      <div class="settings-content">
        <!-- Theme Section -->
        <div class="setting-section">
          <h3 data-translate="themeTitle">๐จ Chแปง ฤแป giao diแปn</h3>
          <div class="theme-grid">
            <button class="theme-card" data-theme="default">
              <div class="theme-preview default-preview"></div>
              <span data-translate="themeDefault">Mแบทc ฤแปnh</span>
            </button>
            <button class="theme-card" data-theme="ocean">
              <div class="theme-preview ocean-preview"></div>
              <span data-translate="themeOcean">ฤแบกi dฦฐฦกng</span>
            </button>
            <button class="theme-card" data-theme="sunset">
              <div class="theme-preview sunset-preview"></div>
              <span data-translate="themeSunset">Hoรng hรดn</span>
            </button>
            <button class="theme-card" data-theme="forest">
              <div class="theme-preview forest-preview"></div>
              <span data-translate="themeForest">Rแปซng xanh</span>
            </button>
            <button class="theme-card" data-theme="neon">
              <div class="theme-preview neon-preview"></div>
              <span data-translate="themeNeon">Neon</span>
            </button>
            <button class="theme-card" data-theme="purple">
              <div class="theme-preview purple-preview"></div>
              <span data-translate="themePurple">Tรญm mแปng mฦก</span>
            </button>
          </div>
        </div>
        
        <!-- Language Section -->
        <div class="setting-section">
          <h3 data-translate="languageTitle">๐ Ngรดn ngแปฏ</h3>
          <div class="language-buttons">
            <button class="lang-btn active" data-lang="vi">
              <span class="flag">VN</span> Tiแบฟng Viแปt
            </button>
            <button class="lang-btn" data-lang="en">
              <span class="flag">EN</span> English
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- GAME SCREEN -->
  <div id="gameScreen" class="screen">
    <div class="game-header">
      <button class="header-btn" id="backBtn" data-translate="back">โ Trแป vแป</button>
      <button class="header-btn" id="settingsGameBtn">โ๏ธ</button>
    </div>
    
    <div class="wrap">
      <div class="panel">
        <h3>๐งฉ <span data-translate="gameBoard">Game xแบฟp gแบกch</span></h3>
        <div class="board-container">
          <div class="board" id="board" aria-label="Bแบฃng chฦกi"></div>
          <div id="centerMessage"></div>
        </div>

        <div style="margin-top:12px;display:flex;gap:8px;align-items:center;justify-content:space-between">
          <div class="info">
            <div class="score" id="score">ฤiแปm: 0 โข Combo: 0</div>
            <div class="combo-multiplier" id="comboMultiplier" style="font-size:14px;color:var(--accent);font-weight:600;margin-top:4px;opacity:0;transition:opacity 0.3s;">
              ๐ฅ Nhรขn x1.0
            </div>
            <div class="hint" data-translate="gameHint">
              ฤแบทt gแบกch ฤแป cรณ ฤiแปm (รญt hฦกn phรก). Khi 1 hรng (dแปc/ngang) ฤแบงy sแบฝ phรก. 
              Phรก liรชn tiแบฟp nhiแปu hรng sแบฝ ฤฦฐแปฃc nhรขn combo!
            </div>
          </div>
        </div>

        <div class="powerups" style="margin-top:12px">
          <button id="bombBtn">๐ฃ <span data-translate="bomb">Bom</span> (x3)</button>
          <button id="swapBtn">๐ <span data-translate="swap">Xรกo trแปn</span> (x3)</button>
          <button id="hintBtn">๐ฒ <span data-translate="replace">Thay khแปi</span> (x3)</button>
        </div>
      </div>

      <div class="panel">
        <h3>๐ฏ <span data-translate="blocksStorage">Khแปi & Lฦฐu trแปฏ</span></h3>
        <div class="controls">
          <div style="display:flex;align-items:center;gap:12px;justify-content:space-between">
            <div style="flex:1">
              <div style="font-size:13px;color:var(--muted);margin-bottom:6px" data-translate="queue">Hรng chแป (3 khแปi)</div>
              <div class="queue" id="queue" aria-label="Hรng chแป khแปi"></div>
            </div>

            <div style="width:110px;">
              <div style="font-size:13px;color:var(--muted);margin-bottom:6px" data-translate="storage">Kho lฦฐu</div>
              <div class="storage" id="storage" title="Click ฤแป lฦฐu/ฤแปi khแปi" aria-label="Kho lฦฐu"></div>
            </div>
          </div>

          <div class="toolbar" style="margin-top:8px">
            <button id="rotateBtn" data-translate="rotate">Xoay</button>
            <button id="storeBtn" data-translate="storeSwap">Lฦฐu/ฤแปi</button>
            <button id="newGame" class="primary" data-translate="newGame">Bแบฏt ฤแบงu lแบกi</button>
          </div>

          <div style="margin-top:10px" class="muted" data-translate="controls">Ghi chรบ: Kรฉo & thแบฃ khแปi ฤแป ฤแบทt. Nhแบฅn hoแบทc dรนng phรญm Q/E ฤแป xoay.</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Replace modal -->
  <div id="modalBackdrop" class="modal-backdrop" role="dialog" aria-hidden="true">
    <div class="replace-menu" role="document" aria-modal="true" aria-labelledby="replaceTitle">
      <div class="replace-header">
        <div id="replaceTitle" class="replace-title" data-translate="selectBlock">Chแปn khแปi thay thแบฟ</div>
        <button id="replaceClose" class="replace-close" aria-label="ฤรณng">โ</button>
      </div>
      <div id="replaceGrid" class="replace-grid"></div>
    </div>
  </div>

  <!-- Game Over Modal -->
  <div id="gameOverModal" class="modal-backdrop">
    <div class="game-over-panel">
      <h2 class="game-over-title" data-translate="gameOver">๐ฎ Game Over!</h2>
      <p class="game-over-message" data-translate="gameOverMessage">Khรดng cรฒn nฦฐแปc ฤi hแปฃp lแป!</p>
      <div class="game-over-score">
        <span data-translate="finalScore">ฤiแปm cuแปi cรนng:</span>
        <span id="finalScore" class="final-score-value">0</span>
      </div>
      <div class="game-over-buttons">
        <button class="game-over-btn primary" id="restartBtn" data-translate="playAgain">๐ Chฦกi lแบกi</button>
        <button class="game-over-btn" id="menuBtn" data-translate="mainMenu">๐ Menu chรญnh</button>
      </div>
    </div>
  </div>

  <script src="./data/xep-hinh/game.js"></script>
</body>
</html>