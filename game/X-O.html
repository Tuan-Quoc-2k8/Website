<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tic-Tac-Toe Game</title>
  <link rel="stylesheet" href="./data/x-o/styles.css">
  <link rel="icon" href="./favicon.ico">
</head>
<body>
  <!-- Intro Screen -->
  <div id="intro-screen" class="screen active">
    <h1 data-lang="title">Tic-Tac-Toe</h1>
    <div class="menu-buttons">
      <button class="menu-btn" onclick="showScreen('play-screen')">
        <span data-lang="play">Play</span>
      </button>
      <button class="menu-btn" onclick="showScreen('settings-screen')">
        <span data-lang="settings">Settings</span>
      </button>
      <button class="menu-btn" onclick="showScreen('tutorial-screen')">
        <span data-lang="tutorial">Tutorial</span>
      </button>
    </div>
  </div>

  <!-- Play Screen -->
  <div id="play-screen" class="screen">
    <h2 data-lang="selectMode">Select Game Mode</h2>
    <div class="menu-buttons">
      <button class="menu-btn" onclick="selectMode('player')">
        <span data-lang="playWithPlayer">Play with Another Player</span>
      </button>
      <button class="menu-btn" onclick="showScreen('difficulty-screen')">
        <span data-lang="playWithComputer">Play with Computer</span>
      </button>
      <button class="back-btn" onclick="showScreen('intro-screen')">
        <span data-lang="back">Back</span>
      </button>
    </div>
  </div>

  <!-- Difficulty Screen -->
  <div id="difficulty-screen" class="screen">
    <h2 data-lang="selectDifficulty">Select Difficulty</h2>
    <div class="menu-buttons">
      <button class="menu-btn" onclick="selectMode('noob')">
        <span data-lang="noob">Noob</span>
      </button>
      <button class="menu-btn" onclick="selectMode('pro')">
        <span data-lang="pro">Pro</span>
      </button>
      <button class="menu-btn" onclick="selectMode('expert')">
        <span data-lang="expert">Expert</span>
      </button>
      <button class="back-btn" onclick="showScreen('play-screen')">
        <span data-lang="back">Back</span>
      </button>
    </div>
  </div>

  <!-- Map Selection Screen -->
  <div id="map-screen" class="screen">
    <h2 data-lang="selectMap">Select Map</h2>
    <div class="menu-buttons">
      <button class="menu-btn" onclick="selectMap(3, 3)">3×3 (3 <span data-lang="inRow">in a row</span>)</button>
      <button class="menu-btn" onclick="selectMap(7, 4)">7×7 (4 <span data-lang="inRow">in a row</span>)</button>
      <button class="menu-btn" onclick="selectMap(12, 5)">12×12 (5 <span data-lang="inRow">in a row</span>)</button>
      <button class="menu-btn" id="custom-map-btn" onclick="showCustomMap()">
        <span data-lang="customMap">Custom Map</span>
      </button>
      <div id="ai-warning" class="info-box" style="display: none; margin-top: 20px;">
        <p data-lang="aiMapWarning">
          ℹ️ Custom maps are disabled in AI mode to ensure smooth gameplay. Please select a predefined map size.
        </p>
      </div>
      <button class="back-btn" onclick="goBackFromMap()">
        <span data-lang="back">Back</span>
      </button>
    </div>
  </div>

  <!-- Custom Map Screen -->
  <div id="custom-map-screen" class="screen">
    <h2 data-lang="customMap">Custom Map</h2>
    <div class="info-box">
      <p data-lang="customMapInfo">
        ⚠️ <strong>Note:</strong> Boards larger than 15×15 may take longer to render. For best performance with AI, keep boards under 20×20.
      </p>
    </div>
    <div class="input-group">
      <label data-lang="boardSize">Board Size:</label>
      <input type="number" id="custom-size" min="3" max="50" value="10">
      <small class="hint" data-lang="boardSizeHint">(Min: 3, Max: 50)</small>
    </div>
    <div class="input-group">
      <label data-lang="winCondition">Win Condition:</label>
      <input type="number" id="custom-win" min="3" max="20" value="5">
      <small class="hint" data-lang="winConditionHint">(Min: 3, Max: 20 or board size)</small>
    </div>
    <div id="custom-error" class="error-message"></div>
    <button class="menu-btn" onclick="applyCustomMap()">
      <span data-lang="start">Start</span>
    </button>
    <button class="back-btn" onclick="showScreen('map-screen')">
      <span data-lang="back">Back</span>
    </button>
  </div>

  <!-- Settings Screen -->
  <div id="settings-screen" class="screen">
    <h2 data-lang="settings">Settings</h2>
    
    <div class="setting-section">
      <h3 data-lang="skins">Skins</h3>
      <div class="skin-options">
        <button class="skin-btn" onclick="changeSkin('classic')">
          <span data-lang="classic">Classic</span>
        </button>
        <button class="skin-btn" onclick="changeSkin('neon')">
          <span data-lang="neon">Neon</span>
        </button>
        <button class="skin-btn" onclick="changeSkin('pastel')">
          <span data-lang="pastel">Pastel</span>
        </button>
        <button class="skin-btn" onclick="changeSkin('dark')">
          <span data-lang="dark">Dark</span>
        </button>
      </div>
    </div>

    <div class="setting-section">
      <h3 data-lang="language">Language</h3>
      <div class="lang-options">
        <button class="lang-btn" onclick="changeLanguage('en')">English</button>
        <button class="lang-btn" onclick="changeLanguage('vi')">Tiếng Việt</button>
      </div>
    </div>

    <button class="back-btn" onclick="showScreen('intro-screen')">
      <span data-lang="back">Back</span>
    </button>
  </div>

  <!-- Tutorial Screen -->
  <div id="tutorial-screen" class="screen">
    <h2 data-lang="tutorial">Tutorial</h2>
    <div class="tutorial-content">
      <div data-lang="tutorialText">
        <h3>How to Play</h3>
        <p><strong>Objective:</strong> Get the required number of your symbols in a row (horizontally, vertically, or diagonally) to win.</p>
        <p><strong>Game Modes:</strong></p>
        <ul>
          <li><strong>Player vs Player:</strong> Take turns placing X and O on the board.</li>
          <li><strong>Player vs Computer:</strong> Challenge the AI at different difficulty levels.</li>
        </ul>
        <p><strong>Difficulty Levels:</strong></p>
        <ul>
          <li><strong>Noob:</strong> AI makes random moves.</li>
          <li><strong>Pro:</strong> AI blocks your winning moves and tries to win.</li>
          <li><strong>Expert:</strong> AI uses advanced strategy (minimax algorithm).</li>
        </ul>
        <p><strong>Map Sizes:</strong></p>
        <ul>
          <li><strong>3×3:</strong> First to get 3 in a row wins.</li>
          <li><strong>7×7:</strong> First to get 4 in a row wins.</li>
          <li><strong>12×12:</strong> First to get 5 in a row wins.</li>
          <li><strong>Custom:</strong> Create your own board size and win condition.</li>
        </ul>
      </div>
    </div>
    <button class="back-btn" onclick="showScreen('intro-screen')">
      <span data-lang="back">Back</span>
    </button>
  </div>

  <!-- Game Screen -->
  <div id="game-screen" class="screen">
    <div class="game-header">
      <h2 id="status" data-lang="turn">Your Turn</h2>
      <div class="game-buttons">
        <button class="small-btn" onclick="resetGame()">
          <span data-lang="restart">Restart</span>
        </button>
        <button class="small-btn" onclick="exitGame()">
          <span data-lang="exit">Exit</span>
        </button>
      </div>
    </div>
    <div id="game-board"></div>
  </div>

  <script src="./data/x-o/game.js"></script>
</body>
</html>